<!DOCTYPE html>
<html lang="ko" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title> 카드 게임 </title>
    <script src="jquery-3.4.1.js" charset="utf-8"></script>
    <script src="jquery-ui.js"></script>
    <style media="screen">
      body {
         background-color:aquamarine;
      }
      ul{
        list-style: none;
        text-align: center;
      }
      li {
        list-style: none;
        display:inline-block;
      }

      #gameBox {
        width: auto;
        height: auto;
      }

      #gameBox>li {
        width: 110px;
        height: 130px;
        text-align: center;
        line-height: 100px;
        font-size: 20px;
        color: blue;
        border: 1px solid black;
        background-color: lightcyan;
      }

      .card {
        width: 90px;
        height: 120px;
        float:left;
        position: relative;
        text-align: center;
        line-height: 20px;
        border: 1px solid black;
        background-color: white;
        cursor: pointer;
      }

    </style>
    <script type="text/javascript">
      var cardNumber;
      var dragCard;
      let json = {
          "menu": [
              {"의류": ["반바지", "카라티", "원피스", "롱코트", "플리스"]},
              {"사람": ["백종원", "시진핑", "트럼프", "김정일", "푸-틴"]},
              {"음식": ["광어회", "초밥", "삼각김밥", "치킨", "라면"]},
              {"게임": ["Rainbow6", "유로트럭", "Arma3", "GTA5", "테탑시"]}
          ]
        }

        let move=false;
        let count=0;
        let AnswerCount=20;

        $(document).ready(function() {
            for (var i in json['menu']) {
              //console.log(i);
                for (var j in json['menu'][i]) {
                  //console.log(j);
                    $('#gameBox>li').eq(i).text(j);
                    for (var k in json['menu'][i][j]) {
                        //console.log(k);
                        $('body').append(`<div class="card">${json['menu'][i][j][k]}<img src="images/${json['menu'][i][j][k]}.jpg" width="60" hight="80"></div>`);
                    }

                    $('#gameBox>li').droppable({
                        drop: function(event, ui) {
                            var categori=$(this).text() // 분류 4개 (의류, 사람, 음식, 게임)
                            for(var o in json['menu']){
                                for(var p in json['menu'][o][categori]){
                                    if(json['menu'][o][categori][p]==dragCard){
                                    //배열 menu의 카드 n번이 == 드래그 카드와 같다면
                                        $('.card').eq(cardNumber-1).hide(500);
                                        move=true;
                                        count++;
                                        break;
                                    }else{
                                        move=false;
                                    }

                                    console.log("--------------------");
                                    console.log("cardNumber : " + cardNumber);
                                    console.log("categori(분류) : " + categori);
                                    console.log("dragCard(카드) : " + dragCard);
                                    console.log("json['menu'][o][categori](분류종류) : " + json['menu'][o][categori]);
                                    console.log("json['menu'][o][categori][p](카드비교) : " + json['menu'][o][categori][p]);
                                    console.log("=====================");
                                    console.log("");
                                }
                            }
                            if(!move){
                                $('.card').draggable({ revert:true });
                            }
                            if(count==AnswerCount){
                                alert('정답')
                            }
                        }
                    });
                }
            }
            $('.card').draggable();
            $('.card').mousedown(function() {
                cardNumber=$(this).index();
                dragCard=$(this).text(); })
        })
    </script>
  </head>
  <body>
    <ul id="gameBox">
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <br><br><br><hr><br>
  </body>
</html>
